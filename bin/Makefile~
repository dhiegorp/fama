#Variaveis e diret√≥rios

CXX=g++
LIBS=-lm

OBJ_DIR=obj/

CLASS_DIR=../classificador/
TREIN_DIR=../treinador/
CORPU_DIR=../corpus/
AVALI_DIR=../avaliador/
VALID_DIR=../validador/
TESTE_DIR=../testes/

#Arquivos

CLASS_NAMES=classificador classificador_adaboost_m1 classificadorhmm classificador_duasclasses
TREIN_NAMES=treinador treinador_adaboost_m1 hmm treinador_distribuicao
CORPU_NAMES=corpus corpusmatriz
AVALI_NAMES=Avaliador avaliador_prob
VALID_NAMES=validador validadorkdobras
TESTE_NAMES=AdaBoostM1_com_HMM

ALL_FILES=$(addsuffix .o, $(CLASS_NAMES) $(TREIN_NAMES) $(CORPU_NAMES) $(AVALI_NAMES) $(VALID_NAMES) $(TESTE_NAMES))

_CLASSIFICADOR = $(addprefix $(OBJ_DIR),$(addsuffix .o, $(CLASS_NAMES)))
_CORPUS = $(addprefix $(OBJ_DIR),$(addsuffix .o, $(CORPU_NAMES)))
_TREINADOR = $(addprefix $(OBJ_DIR),$(addsuffix .o, $(TREIN_NAMES)))
_AVALIADOR = $(addprefix $(OBJ_DIR),$(addsuffix .o, $(AVALI_NAMES)))
_VALIDADOR = $(addprefix $(OBJ_DIR),$(addsuffix .o, $(VALID_NAMES)))
_TESTE = $(addprefix $(OBJ_DIR),$(addsuffix .o, $(TESTE_NAMES)))

#Regras

all: teste

teste: $(addprefix $(OBJ_DIR), $(ALL_FILES))
	$(CXX) -o $@ $^ $(LIBS)
	
# Compila os arquivos do Corpus
$(_CORPUS): obj/%.o: $(addprefix $(CORPU_DIR), %.cpp)
	$(CXX) -c -o $@ $< -I$(CORPU_DIR)

# Compila os arquivos do Treinador
$(_TREINADOR): obj/%.o: $(addprefix $(TREIN_DIR), %.cpp)
	$(CXX) -c -o $@ $< -I$(CORPU_DIR) -I$(CLASS_DIR) -I$(TREIN_DIR)

# Compila os arquivos do Classificador
$(_CLASSIFICADOR): obj/%.o: $(addprefix $(CLASS_DIR), %.cpp)
	$(CXX) -c -o $@ $< -I$(CORPU_DIR) -I$(CLASS_DIR) -I$(TREIN_DIR)

# Compila os arquivos do Avaliador
$(_AVALIADOR): obj/%.o: $(addprefix $(AVALI_DIR), %.cpp)
	$(CXX) -c -o $@ $< -I$(AVALI_DIR) -I$(CORPU_DIR)

# Compila os arquivos do Validador
$(_VALIDADOR): obj/%.o: $(addprefix $(VALID_DIR), %.cpp)
	$(CXX) -c -o $@ $< -I$(VALID_DIR) -I$(CORPU_DIR) -I$(AVALI_DIR)

# Compila os arquivos de teste
$(_TESTE): obj/%.o: $(addprefix $(TESTE_DIR), %.cpp)
	$(CXX) -c -o $@ $< -I$(TREIN_DIR) -I$(CLASS_DIR) -I$(VALID_DIR) -I$(CORPU_DIR) -I$(AVALI_DIR)

clean:
	rm -f $(ODIR)/*.o *~
